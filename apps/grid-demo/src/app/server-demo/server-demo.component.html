<div class="demo-container">
  <div class="demo-controls">
    <h2>Server-Side Grid Demo</h2>
    <div class="data-type-switcher">
      <button 
        *ngFor="let type of dataTypes" 
        [class.active]="currentDataType === type.value"
        (click)="loadDataByType(type.value)"
        class="data-type-btn">
        {{ type.label }}
      </button>
    </div>
    <div class="mode-switcher">
      <a routerLink="/" class="back-link">← Back to Client-Side</a>
    </div>
  </div>
  
  <div class="demo-grid">
    <div class="grid-wrapper" [class.loading]="isLoading">
      <lib-data-grid
        *ngIf="serverSideOptions"
        [options]="serverSideOptions"
        (rowClick)="onRowClick($event)"
        (cellClick)="onCellClick($event)"
        (selectionChange)="onSelectionChange($event)"
        (sortChange)="onSortChange($event)"
        (filterChange)="onFilterChange($event)"
        (pageChange)="onPageChange($event)"
        (dataStateChange)="onDataStateChange($event)"
        (groupToggle)="onGroupToggle($event)"
        (editSave)="onEditSave($event)">
      </lib-data-grid>
      <div *ngIf="!serverSideOptions" class="loading-message">Loading data...</div>
      
      <!-- Loading Indicator - Shows in data area only -->
      <!-- The loading indicator is added via CSS pseudo-elements on grid-body -->
    </div>
  </div>
  
  <div class="demo-info">
    <h3>Server-Side Features</h3>
    <ul>
      <li>✅ Server-side data loading (50 rows)</li>
      <li>✅ Pagination with server requests</li>
      <li>✅ Column sorting, filtering</li>
      <li>✅ Column resizing and reordering</li>
      <li>✅ Cell editing</li>
      <li>✅ Multiple row selection</li>
      <li>✅ Export to CSV, Excel, PDF</li>
      <li>✅ Settings persistence (localStorage)</li>
      <li>✅ Custom cell templates</li>
      <li>✅ Keyboard navigation</li>
    </ul>
  </div>
</div>

<!-- Custom Templates -->
<ng-template #statusTemplate let-row let-value="value">
  <span [class]="value ? 'badge badge-success' : 'badge badge-danger'">
    {{ value ? 'Active' : 'Inactive' }}
  </span>
</ng-template>

<ng-template #ratingTemplate let-row let-value="value">
  <div class="rating-display">
    <span class="stars">{{ getStars(value) }}</span>
    <span class="rating-value">({{ value.toFixed(1) }})</span>
  </div>
</ng-template>

